# =============================================================================
# AUTO-DRIVE STAGING ENVIRONMENT CONFIGURATION
# =============================================================================
# This single file contains ALL environment variables for ALL services.
# Copy this file to .env and fill in your staging values.
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL
# -----------------------------------------------------------------------------
NODE_ENV=production
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_USER=autodrive
POSTGRES_PASSWORD=your-secure-postgres-password-here
POSTGRES_DB=autodrive

# Connection string used by all services
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# RABBITMQ
# -----------------------------------------------------------------------------
RABBITMQ_DEFAULT_USER=autodrive
RABBITMQ_DEFAULT_PASS=your-secure-rabbitmq-password-here
RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@rabbitmq:5672
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# -----------------------------------------------------------------------------
# HASURA
# -----------------------------------------------------------------------------
HASURA_GRAPHQL_PORT=6565
HASURA_GRAPHQL_ADMIN_SECRET=your-secure-hasura-admin-secret-here
HASURA_GRAPHQL_JWT_SECRET={"type":"RS256","key":"-----BEGIN PUBLIC KEY-----\\nYOUR_PUBLIC_KEY_HERE\\n-----END PUBLIC KEY-----"}
HASURA_GRAPHQL_ENABLE_CONSOLE=true
HASURA_GRAPHQL_CORS_DOMAIN=https://staging.auto-drive.yourdomain.xyz

# -----------------------------------------------------------------------------
# BACKEND API
# -----------------------------------------------------------------------------
PORT=3000
BACKEND_API_PORT=3000
BACKEND_WORKER_PORT=3001
BACKEND_DOWNLOAD_API_PORT=3030
BACKEND_DOWNLOAD_WORKER_PORT=3031

# CORS - comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=https://staging.auto-drive.yourdomain.xyz,<http://localhost:8080>

# Autonomys Network Configuration
RPC_ENDPOINT=wss://rpc-0.mainnet.autonomys.xyz/ws
PRIVATE_KEYS_PATH=//Alice

# Object Mapping Archiver
OBJECT_MAPPING_ARCHIVER_URL=https://indexer.staging.autonomys.xyz

# Files Gateway
FILES_GATEWAY_URL=https://gateway.staging.autonomys.xyz
FILES_GATEWAY_TOKEN=your-files-gateway-token

# Auth Service Connection (internal Docker network)
AUTH_SERVICE_URL=http://auth:3050
AUTH_SERVICE_API_KEY=your-secure-auth-api-key-here

# Cache Configuration
CACHE_DIR=/app/.cache
CACHE_MAX_SIZE=10737418240
CACHE_TTL=0

# Feature Flags
TASK_MANAGER_ACTIVE=true
OBJECT_MAPPING_ARCHIVER_ACTIVE=true
ALL_SERVICES_ACTIVE=true

# EVM/Payments (if enabled)
EVM_CHAIN_ENDPOINT=https://auto-evm.mainnet.autonomys.xyz/ws
EVM_CHAIN_CONTRACT_ADDRESS=0xBa5bed8325183c0807EcBC80C82D40Dc7Ac5cbf7
EVM_CHAIN_CONFIRMATIONS=6
CREDITS_PRICE_MULTIPLIER=5.00

# Monitoring (optional)
VICTORIA_ACTIVE=false
# VICTORIA_ENDPOINT=
# VICTORIA_USERNAME=
# VICTORIA_PASSWORD=
METRIC_ENVIRONMENT_TAG=chain=staging

# -----------------------------------------------------------------------------
# AUTH SERVICE
# -----------------------------------------------------------------------------
AUTH_PORT=3050
JWT_SECRET=-----BEGIN RSA PRIVATE KEY-----\\nYOUR_PRIVATE_KEY_HERE\\n-----END RSA PRIVATE KEY-----
JWT_SECRET_ALGORITHM=RS256
API_SECRET=your-secure-api-secret-here

# -----------------------------------------------------------------------------
# FRONTEND (Next.js)
# -----------------------------------------------------------------------------
# These are build-time variables (NEXT_PUBLIC_*)
NEXT_PUBLIC_ENV=local
NEXT_PUBLIC_AUTH_API_URL=https://staging.auto-drive.yourdomain.xyz/auth
NEXT_PUBLIC_LOCAL_RPC_URL=https://staging.auto-drive.yourdomain.xyz/api
NEXT_PUBLIC_LOCAL_DOWNLOAD_URL=https://download.staging.auto-drive.yourdomain.xyz/api
NEXT_PUBLIC_LOCAL_GQL_URL=https://staging.auto-drive.yourdomain.xyz/hasura/v1/graphql
NEXT_PUBLIC_PROJECT_ID=your-walletconnect-project-id
NEXT_PUBLIC_MAX_FILES_LIMIT=10

# NextAuth Configuration
NEXTAUTH_URL=https://staging.auto-drive.yourdomain.xyz
NEXTAUTH_SECRET=your-secure-nextauth-secret-here

# OAuth Providers (optional - configure as needed)
GOOGLE_AUTH_CLIENT_ID=your-google-client-id
GOOGLE_AUTH_CLIENT_SECRET=your-google-client-secret
DISCORD_AUTH_CLIENT_ID=your-discord-client-id
DISCORD_AUTH_CLIENT_SECRET=your-discord-client-secret
GITHUB_AUTH_CLIENT_ID=your-github-client-id
GITHUB_AUTH_CLIENT_SECRET=your-github-client-secret

# -----------------------------------------------------------------------------
# DOCKER IMAGES (for pre-built images)
# -----------------------------------------------------------------------------
BACKEND_IMAGE=ghcr.io/autonomys/auto-drive-backend:latest
AUTH_IMAGE=ghcr.io/autonomys/auto-drive-auth:latest
FRONTEND_IMAGE=ghcr.io/autonomys/auto-drive-frontend:latest

# -----------------------------------------------------------------------------
# NEW RELIC (optional monitoring)
# -----------------------------------------------------------------------------
# NR_API_KEY=
# NR_AGENT_IDENTIFIER=auto-drive-staging
