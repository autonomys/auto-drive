# =============================================================================
# AUTO-DRIVE STAGING ENVIRONMENT CONFIGURATION
# =============================================================================
# This single file contains ALL environment variables for ALL services.
# Copy this file to .env and fill in your staging values.
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL
# -----------------------------------------------------------------------------
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_USER=autodrive
POSTGRES_PASSWORD=your-secure-postgres-password-here
POSTGRES_DB=autodrive

# Connection string used by all services
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# RABBITMQ
# -----------------------------------------------------------------------------
RABBITMQ_DEFAULT_USER=autodrive
RABBITMQ_DEFAULT_PASS=your-secure-rabbitmq-password-here
RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@rabbitmq:5672

# -----------------------------------------------------------------------------
# HASURA
# -----------------------------------------------------------------------------
HASURA_GRAPHQL_PORT=6565
HASURA_GRAPHQL_ADMIN_SECRET=your-secure-hasura-admin-secret-here
HASURA_GRAPHQL_JWT_SECRET={"type":"RS256","key":"-----BEGIN PUBLIC KEY-----\\nYOUR_PUBLIC_KEY_HERE\\n-----END PUBLIC KEY-----"}
HASURA_GRAPHQL_ENABLE_CONSOLE=true
HASURA_GRAPHQL_CORS_DOMAIN=https://staging.auto-drive.yourdomain.xyz

# -----------------------------------------------------------------------------
# BACKEND API
# -----------------------------------------------------------------------------
# CORS - comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=https://staging.auto-drive.yourdomain.xyz,http://localhost:8080

# Request size limit
# REQUEST_SIZE_LIMIT=200mb

# Autonomys Network Configuration
RPC_ENDPOINT=wss://rpc-0.mainnet.autonomys.xyz/ws
PRIVATE_KEYS_PATH=//Alice

# Object Mapping Archiver
OBJECT_MAPPING_ARCHIVER_URL=https://indexer.staging.autonomys.xyz
# OBJECT_MAPPING_ARCHIVER_STEP=1000

# Files Gateway
FILES_GATEWAY_URL=https://gateway.staging.autonomys.xyz
FILES_GATEWAY_TOKEN=your-files-gateway-token

# Auth Service Connection (internal Docker network)
AUTH_SERVICE_URL=http://auth:3050
AUTH_SERVICE_API_KEY=your-secure-auth-api-key-here

# Cache Configuration
CACHE_DIR=/usr/src/app/apps/backend/.cache
CACHE_MAX_SIZE=10737418240
# MEMORY_DOWNLOAD_CACHE_MAX_SIZE=10737418240

# RabbitMQ tuning
# RABBITMQ_PREFETCH=10
# RABBITMQ_KEEP_ALIVE_INTERVAL=60000

# Upload/Download limits
# MAX_CONCURRENT_UPLOADS=40
# MAX_ANONYMOUS_DOWNLOAD_SIZE=104857600
# OPTIONAL_AUTH=false

# Account defaults
# DEFAULT_ACCOUNT_MODE=OneOff
# DEFAULT_ACCOUNT_UPLOAD_LIMIT=104857600
# DEFAULT_ACCOUNT_DOWNLOAD_LIMIT=5368709120
# WEB3_DEFAULT_ACCOUNT_UPLOAD_LIMIT=1048576
# WEB3_DEFAULT_ACCOUNT_DOWNLOAD_LIMIT=104857600

# Content restrictions
# FORBIDDEN_EXTENSIONS=

# Feature Flags
TASK_MANAGER_ACTIVE=true
OBJECT_MAPPING_ARCHIVER_ACTIVE=true
ALL_SERVICES_ACTIVE=true
# TASK_MANAGER_DISABLED=false
# OBJECT_MAPPING_ARCHIVER_DISABLED=false
# TASK_MANAGER_MAX_RETRIES=3

# Buy Credits (optional)
# BUY_CREDITS_ACTIVE=false
# BUY_CREDITS_STAFF_ONLY=false
# STAFF_USERNAME_ALLOWLIST=
# STAFF_DOMAINS=

# EVM/Payments (if enabled)
EVM_CHAIN_ENDPOINT=https://auto-evm.mainnet.autonomys.xyz/ws
EVM_CHAIN_CONTRACT_ADDRESS=0xBa5bed8325183c0807EcBC80C82D40Dc7Ac5cbf7
EVM_CHAIN_CONFIRMATIONS=6
# EVM_CHAIN_CHECK_INTERVAL=30000
CREDITS_PRICE_MULTIPLIER=5.00

# Monitoring (optional)
VICTORIA_ACTIVE=false
# VICTORIA_ENDPOINT=
# VICTORIA_USERNAME=
# VICTORIA_PASSWORD=
METRIC_ENVIRONMENT_TAG=chain=staging

# -----------------------------------------------------------------------------
# AUTH SERVICE
# -----------------------------------------------------------------------------
AUTH_PORT=3050
JWT_SECRET=-----BEGIN RSA PRIVATE KEY-----\\nYOUR_PRIVATE_KEY_HERE\\n-----END RSA PRIVATE KEY-----
JWT_SECRET_ALGORITHM=RS256
API_SECRET=your-secure-api-secret-here
# REVOKE_TOKEN_EMITTED_BEFORE_IN_SECONDS=0

# -----------------------------------------------------------------------------
# FRONTEND (Next.js)
# -----------------------------------------------------------------------------
# These are build-time variables (NEXT_PUBLIC_*)
NEXT_PUBLIC_ENV=local
NEXT_PUBLIC_AUTH_API_URL=https://staging.auto-drive.yourdomain.xyz/auth
NEXT_PUBLIC_LOCAL_RPC_URL=https://staging.auto-drive.yourdomain.xyz/api
NEXT_PUBLIC_LOCAL_DOWNLOAD_URL=https://download.staging.auto-drive.yourdomain.xyz/api
NEXT_PUBLIC_LOCAL_GQL_URL=https://staging.auto-drive.yourdomain.xyz/hasura/v1/graphql
NEXT_PUBLIC_PROJECT_ID=your-walletconnect-project-id
NEXT_PUBLIC_MAX_FILES_LIMIT=10
# NEXT_PUBLIC_OBJECT_STORE_VERSION=v1

# Mainnet network URLs (override defaults if needed)
# NEXT_PUBLIC_MAINNET_HTTP_URL=https://mainnet.auto-drive.autonomys.xyz/api
# NEXT_PUBLIC_MAINNET_DOWNLOAD_URL=https://public.auto-drive.autonomys.xyz/api
# NEXT_PUBLIC_MAINNET_GQL_URL=https://mainnet.auto-drive.autonomys.xyz/hasura/v1/graphql

# NextAuth Configuration
NEXTAUTH_URL=https://staging.auto-drive.yourdomain.xyz
NEXTAUTH_SECRET=your-secure-nextauth-secret-here
# REFRESHING_TOKEN_THRESHOLD=60

# OAuth Providers (optional - configure as needed)
GOOGLE_AUTH_CLIENT_ID=your-google-client-id
GOOGLE_AUTH_CLIENT_SECRET=your-google-client-secret
DISCORD_AUTH_CLIENT_ID=your-discord-client-id
DISCORD_AUTH_CLIENT_SECRET=your-discord-client-secret
GITHUB_AUTH_CLIENT_ID=your-github-client-id
GITHUB_AUTH_CLIENT_SECRET=your-github-client-secret

# -----------------------------------------------------------------------------
# NEW RELIC (optional monitoring)
# -----------------------------------------------------------------------------
# NR_API_KEY=
# NR_AGENT_IDENTIFIER=auto-drive-staging
